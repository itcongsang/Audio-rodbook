{"ast":null,"code":"import _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport { collection, doc } from 'rxfire/firestore';\nimport { map } from 'rxjs/operators';\nimport { db } from \"./firebase.service\";\nimport { Book } from \"../models/book\";\n\nvar BookAndChannel = function BookAndChannel() {\n  var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  _classCallCheck(this, BookAndChannel);\n\n  this.book = data.book || null;\n  this.channelName = data.channelName || '';\n};\n\nfunction getAllBooks() {\n  return collection(db.collection('books').limit(12)).pipe(map(function (snapshot) {\n    return snapshot.map(function (doc0) {\n      console.log(doc0.data());\n      var nameChannel;\n      var books = new Book(doc0.data());\n      var channelId = books.channelId;\n      var value0 = doc(db.collection('channels').doc(channelId)).subscribe(function (v) {\n        console.log(v.data());\n        nameChannel = v.data().name;\n      }); //return new Book(doc0.data());\n\n      return new BookAndChannel({\n        books: books,\n        nameChannel: nameChannel\n      });\n    });\n  }));\n}\n\nexport { getAllBooks };","map":{"version":3,"sources":["D:/SolutionReactJs/SourceDefault/audio-rodbook/services/book.service.ts"],"names":["collection","doc","map","db","Book","BookAndChannel","data","book","channelName","getAllBooks","limit","pipe","snapshot","doc0","console","log","nameChannel","books","channelId","value0","subscribe","v","name"],"mappings":";AAAA,SAASA,UAAT,EAAqBC,GAArB,QAAgC,kBAAhC;AACA,SAASC,GAAT,QAA8C,gBAA9C;AAEA,SAASC,EAAT;AACA,SAASC,IAAT;;IAEMC,c,GAGJ,0BAA4B;AAAA,MAAhBC,IAAgB,uEAAJ,EAAI;;AAAA;;AAC1B,OAAKC,IAAL,GAAYD,IAAI,CAACC,IAAL,IAAa,IAAzB;AACA,OAAKC,WAAL,GAAmBF,IAAI,CAACE,WAAL,IAAoB,EAAvC;AACD,C;;AAGH,SAASC,WAAT,GAAuB;AACrB,SAAOT,UAAU,CAACG,EAAE,CAACH,UAAH,CAAc,OAAd,EAAuBU,KAAvB,CAA6B,EAA7B,CAAD,CAAV,CAA6CC,IAA7C,CAELT,GAAG,CAAC,UAAAU,QAAQ;AAAA,WACVA,QAAQ,CAACV,GAAT,CAAa,UAAAW,IAAI,EAAI;AACnBC,MAAAA,OAAO,CAACC,GAAR,CAAYF,IAAI,CAACP,IAAL,EAAZ;AACA,UAAIU,WAAJ;AACA,UAAIC,KAAK,GAAG,IAAIb,IAAJ,CAASS,IAAI,CAACP,IAAL,EAAT,CAAZ;AACA,UAAIY,SAAS,GAAGD,KAAK,CAACC,SAAtB;AACA,UAAIC,MAAM,GAAGlB,GAAG,CAACE,EAAE,CAACH,UAAH,CAAc,UAAd,EAA0BC,GAA1B,CAA8BiB,SAA9B,CAAD,CAAH,CAA8CE,SAA9C,CAAwD,UAAAC,CAAC,EAAI;AACxEP,QAAAA,OAAO,CAACC,GAAR,CAAYM,CAAC,CAACf,IAAF,EAAZ;AACAU,QAAAA,WAAW,GAAGK,CAAC,CAACf,IAAF,GAASgB,IAAvB;AACD,OAHY,CAAb,CALmB,CASnB;;AACA,aAAO,IAAIjB,cAAJ,CAAmB;AAACY,QAAAA,KAAK,EAALA,KAAD;AAAQD,QAAAA,WAAW,EAAXA;AAAR,OAAnB,CAAP;AACD,KAXD,CADU;AAAA,GAAT,CAFE,CAAP;AAiBD;;AAED,SAASP,WAAT","sourcesContent":["import { collection, doc } from 'rxfire/firestore';\r\nimport { map, switchMap, combineLatest } from 'rxjs/operators';\r\n\r\nimport { db } from './firebase.service';\r\nimport { Book } from 'models/book';\r\n\r\nclass BookAndChannel {\r\n  book: Book;\r\n  channelName: string;\r\n  constructor(data: any = {}) {\r\n    this.book = data.book || null;\r\n    this.channelName = data.channelName || '';\r\n  }\r\n}\r\n\r\nfunction getAllBooks() {\r\n  return collection(db.collection('books').limit(12)).pipe(\r\n   \r\n    map(snapshot =>\r\n      snapshot.map(doc0 => {\r\n        console.log(doc0.data());\r\n        let nameChannel;\r\n        let books = new Book(doc0.data());\r\n        let channelId = books.channelId;\r\n        let value0 = doc(db.collection('channels').doc(channelId)).subscribe(v => {\r\n          console.log(v.data());\r\n          nameChannel = v.data().name;\r\n        })\r\n        //return new Book(doc0.data());\r\n        return new BookAndChannel({books, nameChannel});\r\n      })\r\n    )\r\n  );\r\n}\r\n\r\nexport { getAllBooks };\r\n"]},"metadata":{},"sourceType":"module"}